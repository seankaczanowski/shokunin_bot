"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ErrorCode = void 0;
exports.addGravatarSupport = addGravatarSupport;
exports.addScope = addScope;
Object.defineProperty(exports, "buildToken", {
  enumerable: true,
  get: function () {
    return _utils.buildToken;
  }
});
exports.convertPayloadToBase64 = convertPayloadToBase64;
exports.deleteProperties = deleteProperties;
exports.encodeScopedUri = encodeScopedUri;
exports.fileExists = fileExists;
exports.folderExists = folderExists;
exports.formatAuthor = formatAuthor;
exports.getVersion = getVersion;
exports.hasDiffOneKey = hasDiffOneKey;
exports.hasLogin = hasLogin;
exports.isHost = isHost;
exports.isNodeVersionHigherThanV22 = isNodeVersionHigherThanV22;
exports.isObject = void 0;
exports.isObjectOrArray = isObjectOrArray;
exports.isRelatedToDeprecation = isRelatedToDeprecation;
exports.isVersionValid = isVersionValid;
exports.mask = mask;
exports.normalizeDistTags = normalizeDistTags;
exports.pad = pad;
exports.parseAddress = parseAddress;
Object.defineProperty(exports, "parseConfigFile", {
  enumerable: true,
  get: function () {
    return _config.parseConfigFile;
  }
});
exports.parseInterval = parseInterval;
exports.parseReadme = parseReadme;
exports.semverSort = semverSort;
exports.sortByName = sortByName;
exports.tagVersion = tagVersion;
exports.validateURL = validateURL;
var _fs = _interopRequireDefault(require("fs"));
var _lodash = _interopRequireDefault(require("lodash"));
var _semver = _interopRequireDefault(require("semver"));
var _url = require("url");
var _validator = _interopRequireDefault(require("validator"));
var _config = require("@verdaccio/config");
var _core = require("@verdaccio/core");
var _utils = require("@verdaccio/utils");
var _constants = require("./constants");
var _logger = require("./logger");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); } // eslint-disable-next-line max-len
const {
  getBadData,
  getBadRequest,
  getCode,
  getConflict,
  getForbidden,
  getInternalError,
  getNotFound,
  getServiceUnavailable,
  getUnauthorized
} = _core.errorUtils;
const validProtocols = ['https', 'http'];
function convertPayloadToBase64(payload) {
  return Buffer.from(payload, 'base64');
}

/**
 * Check whether an element is an Object
 * @param {*} obj the element
 * @return {Boolean}
 */
const isObject = exports.isObject = _core.validatioUtils.isObject;

/**
 * @deprecated not used un v6
 */
function isObjectOrArray(obj) {
  return _lodash.default.isObject(obj) && _lodash.default.isNull(obj) === false;
}
function tagVersion(data, version, tag) {
  if (tag && data[_constants.DIST_TAGS][tag] !== version && _semver.default.parse(version, true)) {
    // valid version - store
    data[_constants.DIST_TAGS][tag] = version;
    return true;
  }
  return false;
}

/**
 * Gets version from a package object taking into account semver weirdness.
 * @return {String} return the semantic version of a package
 */
function getVersion(pkg, version) {
  // this condition must allow cast
  if (_lodash.default.isNil(pkg.versions[version]) === false) {
    return pkg.versions[version];
  }
  try {
    version = _semver.default.parse(version, true);
    for (const versionItem in pkg.versions) {
      if (version.compare(_semver.default.parse(versionItem, true)) === 0) {
        return pkg.versions[versionItem];
      }
    }
  } catch (err) {
    return undefined;
  }
}

/**
 * Parse an internet address
 * Allow:
 - https:localhost:1234        - protocol + host + port
 - localhost:1234              - host + port
 - 1234                        - port
 - http::1234                  - protocol + port
 - https://localhost:443/      - full url + https
 - http://[::1]:443/           - ipv6
 - unix:/tmp/http.sock         - unix sockets
 - https://unix:/tmp/http.sock - unix sockets (https)
 * @param {*} urlAddress the internet address definition
 * @return {Object|Null} literal object that represent the address parsed
 */
function parseAddress(urlAddress) {
  //
  // TODO: refactor it to something more reasonable?
  //
  //        protocol :  //      (  host  )|(    ipv6     ):  port  /
  let urlPattern = /^((https?):(\/\/)?)?((([^\/:]*)|\[([^\[\]]+)\]):)?(\d+)\/?$/.exec(urlAddress);
  if (urlPattern) {
    return {
      proto: urlPattern[2] || _constants.DEFAULT_PROTOCOL,
      host: urlPattern[6] || urlPattern[7] || _constants.DEFAULT_DOMAIN,
      port: urlPattern[8] || _constants.DEFAULT_PORT
    };
  }
  urlPattern = /^((https?):(\/\/)?)?unix:(.*)$/.exec(urlAddress);
  if (urlPattern) {
    return {
      proto: urlPattern[2] || _constants.DEFAULT_PROTOCOL,
      path: urlPattern[4]
    };
  }
  return null;
}

/**
 * Function filters out bad semver versions and sorts the array.
 * @return {Array} sorted Array
 */
function semverSort(listVersions) {
  return listVersions.filter(function (x) {
    if (!_semver.default.parse(x, true)) {
      _logger.logger.warn({
        ver: x
      }, 'ignoring bad version @{ver}');
      return false;
    }
    return true;
  })
  // FIXME: it seems the @types/semver do not handle a legitimate method named 'compareLoose'
  // @ts-ignore
  .sort(_semver.default.compareLoose).map(String);
}

/**
 * Flatten arrays of tags.
 * @param {*} data
 */
function normalizeDistTags(pkg) {
  let sorted;
  if (!pkg[_constants.DIST_TAGS].latest) {
    // overwrite latest with highest known version based on semver sort
    sorted = semverSort(Object.keys(pkg.versions));
    if (sorted && sorted.length) {
      pkg[_constants.DIST_TAGS].latest = sorted.pop();
    }
  }
  for (const tag in pkg[_constants.DIST_TAGS]) {
    if (_lodash.default.isArray(pkg[_constants.DIST_TAGS][tag])) {
      if (pkg[_constants.DIST_TAGS][tag].length) {
        // sort array
        // FIXME: this is clearly wrong, we need to research why this is like this.
        // @ts-ignore
        sorted = semverSort(pkg[_constants.DIST_TAGS][tag]);
        if (sorted.length) {
          // use highest version based on semver sort
          pkg[_constants.DIST_TAGS][tag] = sorted.pop();
        }
      } else {
        delete pkg[_constants.DIST_TAGS][tag];
      }
    } else if (_lodash.default.isString(pkg[_constants.DIST_TAGS][tag])) {
      if (!_semver.default.parse(pkg[_constants.DIST_TAGS][tag], true)) {
        // if the version is invalid, delete the dist-tag entry
        delete pkg[_constants.DIST_TAGS][tag];
      }
    }
  }
}
const parseIntervalTable = {
  '': 1000,
  ms: 1,
  s: 1000,
  m: 60 * 1000,
  h: 60 * 60 * 1000,
  d: 86400000,
  w: 7 * 86400000,
  M: 30 * 86400000,
  y: 365 * 86400000
};

/**
 * Parse an internal string to number
 * @param {*} interval
 * @return {Number}
 */
function parseInterval(interval) {
  if (typeof interval === 'number') {
    return interval * 1000;
  }
  let result = 0;
  let last_suffix = Infinity;
  interval.split(/\s+/).forEach(function (x) {
    if (!x) {
      return;
    }
    const m = x.match(/^((0|[1-9][0-9]*)(\.[0-9]+)?)(ms|s|m|h|d|w|M|y|)$/);
    if (!m || parseIntervalTable[m[4]] >= last_suffix || m[4] === '' && last_suffix !== Infinity) {
      throw Error('invalid interval: ' + interval);
    }
    last_suffix = parseIntervalTable[m[4]];
    result += Number(m[1]) * parseIntervalTable[m[4]];
  });
  return result;
}
const ErrorCode = exports.ErrorCode = {
  getConflict,
  getBadData,
  getBadRequest,
  getInternalError,
  getUnauthorized,
  getForbidden,
  getServiceUnavailable,
  getNotFound,
  getCode
};

/**
 * Check whether the path already exist.
 * @param {String} path
 * @return {Boolean}
 */
function folderExists(path) {
  try {
    const stat = _fs.default.statSync(path);
    return stat.isDirectory();
  } catch (_) {
    return false;
  }
}

/**
 * Check whether the file already exist.
 * @param {String} path
 * @return {Boolean}
 */
function fileExists(path) {
  try {
    const stat = _fs.default.statSync(path);
    return stat.isFile();
  } catch (_) {
    return false;
  }
}
function sortByName(packages, orderAscending = true) {
  return packages.slice().sort(function (a, b) {
    const comparatorNames = a.name.toLowerCase() < b.name.toLowerCase();
    return orderAscending ? comparatorNames ? -1 : 1 : comparatorNames ? 1 : -1;
  });
}
function addScope(scope, packageName) {
  return `@${scope}/${packageName}`;
}
function deleteProperties(propertiesToDelete, objectItem) {
  _lodash.default.forEach(propertiesToDelete, property => {
    delete objectItem[property];
  });
  return objectItem;
}
function addGravatarSupport(pkgInfo, online = true) {
  const pkgInfoCopy = _objectSpread({}, pkgInfo);
  const author = _lodash.default.get(pkgInfo, 'latest.author', null);
  const contributors = (0, _utils.normalizeContributors)(_lodash.default.get(pkgInfo, 'latest.contributors', []));
  const maintainers = _lodash.default.get(pkgInfo, 'latest.maintainers', []);

  // for author.
  if (author && _lodash.default.isObject(author)) {
    const {
      email
    } = author;
    pkgInfoCopy.latest.author.avatar = (0, _utils.generateGravatarUrl)(email, online);
  }
  if (author && _lodash.default.isString(author)) {
    pkgInfoCopy.latest.author = {
      avatar: _utils.GENERIC_AVATAR,
      email: '',
      author
    };
  }

  // for contributors
  if (_lodash.default.isEmpty(contributors) === false) {
    pkgInfoCopy.latest.contributors = contributors.map(contributor => {
      if (isObject(contributor)) {
        contributor.avatar = (0, _utils.generateGravatarUrl)(contributor.email, online);
      } else if (_lodash.default.isString(contributor)) {
        contributor = {
          avatar: _utils.GENERIC_AVATAR,
          email: contributor,
          name: contributor
        };
      }
      return contributor;
    });
  }

  // for maintainers
  if (_lodash.default.isEmpty(maintainers) === false) {
    pkgInfoCopy.latest.maintainers = maintainers.map(maintainer => {
      maintainer.avatar = (0, _utils.generateGravatarUrl)(maintainer.email, online);
      return maintainer;
    });
  }
  return pkgInfoCopy;
}

/**
 * parse package readme - markdown/ascii
 * @param {String} packageName name of package
 * @param {String} readme package readme

 * @return {String} converted html template
 */
// TODO: rename, does not parse anymore
function parseReadme(packageName, readme) {
  if (_lodash.default.isEmpty(readme) === false) {
    return readme;
  }

  // logs readme not found error
  _logger.logger.info({
    packageName
  }, '@{packageName}: No readme found');
  return 'ERROR: No README data found!';
}
/**
 * Formats author field for webui.
 * @see https://docs.npmjs.com/files/package.json#author
 * @param {string|object|undefined} author
 */
function formatAuthor(author) {
  let authorDetails = {
    name: _constants.DEFAULT_USER,
    email: '',
    url: ''
  };
  if (_lodash.default.isNil(author)) {
    return authorDetails;
  }
  if (_lodash.default.isString(author)) {
    authorDetails = _objectSpread(_objectSpread({}, authorDetails), {}, {
      name: author
    });
  }
  if (_lodash.default.isObject(author)) {
    authorDetails = _objectSpread(_objectSpread({}, authorDetails), author);
  }
  return authorDetails;
}

/**
 * Apply whitespaces based on the length
 * @param {*} str the log message
 * @return {String}
 */
function pad(str, max) {
  if (str.length < max) {
    return str + ' '.repeat(max - str.length);
  }
  return str;
}

/**
 * return a masquerade string with its first and last {charNum} and three dots in between.
 * @param {String} str
 * @param {Number} charNum
 * @returns {String}
 */
function mask(str, charNum = 3) {
  return `${str.substr(0, charNum)}...${str.substr(-charNum)}`;
}
function encodeScopedUri(packageName) {
  return packageName.replace(/\//g, '%2f');
}
function hasDiffOneKey(versions) {
  return Object.keys(versions).length !== 1;
}
function isVersionValid(packageMeta, packageVersion) {
  const hasVersion = typeof packageVersion !== 'undefined';
  if (!hasVersion) {
    return false;
  }
  const hasMatchVersion = Object.keys(packageMeta.versions).includes(packageVersion);
  return hasMatchVersion;
}
function isRelatedToDeprecation(pkgInfo) {
  const {
    versions
  } = pkgInfo;
  for (const version in versions) {
    if (Object.prototype.hasOwnProperty.call(versions[version], 'deprecated')) {
      return true;
    }
  }
  return false;
}
function validateURL(publicUrl) {
  try {
    const parsed = new _url.URL(publicUrl);
    if (!validProtocols.includes(parsed.protocol.replace(':', ''))) {
      throw Error('invalid protocol');
    }
    return true;
  } catch (err) {
    // TODO: add error logger here
    return false;
  }
}
function isHost(url = '', options = {}) {
  return _validator.default.isURL(url, _objectSpread({
    require_host: true,
    allow_trailing_dot: false,
    require_valid_protocol: false,
    // @ts-ignore
    require_port: false,
    require_tld: false
  }, options));
}
function hasLogin(config) {
  var _config$web, _config$web2;
  // FIXME: types are not yet on the library verdaccio/monorepo
  // @ts-ignore
  return _lodash.default.isNil(config === null || config === void 0 ? void 0 : (_config$web = config.web) === null || _config$web === void 0 ? void 0 : _config$web.login) || (config === null || config === void 0 ? void 0 : (_config$web2 = config.web) === null || _config$web2 === void 0 ? void 0 : _config$web2.login) === true;
}
function isNodeVersionHigherThanV22() {
  const [major, minor] = process.versions.node.split('.').map(Number);
  return major > 22 || major === 22 && minor > 0;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZnMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9sb2Rhc2giLCJfc2VtdmVyIiwiX3VybCIsIl92YWxpZGF0b3IiLCJfY29uZmlnIiwiX2NvcmUiLCJfdXRpbHMiLCJfY29uc3RhbnRzIiwiX2xvZ2dlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIm93bktleXMiLCJyIiwidCIsIk9iamVjdCIsImtleXMiLCJnZXRPd25Qcm9wZXJ0eVN5bWJvbHMiLCJvIiwiZmlsdGVyIiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsInB1c2giLCJhcHBseSIsIl9vYmplY3RTcHJlYWQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJmb3JFYWNoIiwiX2RlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyIsImRlZmluZVByb3BlcnRpZXMiLCJkZWZpbmVQcm9wZXJ0eSIsIl90b1Byb3BlcnR5S2V5IiwidmFsdWUiLCJjb25maWd1cmFibGUiLCJ3cml0YWJsZSIsImkiLCJfdG9QcmltaXRpdmUiLCJTeW1ib2wiLCJ0b1ByaW1pdGl2ZSIsImNhbGwiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJnZXRCYWREYXRhIiwiZ2V0QmFkUmVxdWVzdCIsImdldENvZGUiLCJnZXRDb25mbGljdCIsImdldEZvcmJpZGRlbiIsImdldEludGVybmFsRXJyb3IiLCJnZXROb3RGb3VuZCIsImdldFNlcnZpY2VVbmF2YWlsYWJsZSIsImdldFVuYXV0aG9yaXplZCIsImVycm9yVXRpbHMiLCJ2YWxpZFByb3RvY29scyIsImNvbnZlcnRQYXlsb2FkVG9CYXNlNjQiLCJwYXlsb2FkIiwiQnVmZmVyIiwiZnJvbSIsImlzT2JqZWN0IiwiZXhwb3J0cyIsInZhbGlkYXRpb1V0aWxzIiwiaXNPYmplY3RPckFycmF5Iiwib2JqIiwiXyIsImlzTnVsbCIsInRhZ1ZlcnNpb24iLCJkYXRhIiwidmVyc2lvbiIsInRhZyIsIkRJU1RfVEFHUyIsInNlbXZlciIsInBhcnNlIiwiZ2V0VmVyc2lvbiIsInBrZyIsImlzTmlsIiwidmVyc2lvbnMiLCJ2ZXJzaW9uSXRlbSIsImNvbXBhcmUiLCJlcnIiLCJ1bmRlZmluZWQiLCJwYXJzZUFkZHJlc3MiLCJ1cmxBZGRyZXNzIiwidXJsUGF0dGVybiIsImV4ZWMiLCJwcm90byIsIkRFRkFVTFRfUFJPVE9DT0wiLCJob3N0IiwiREVGQVVMVF9ET01BSU4iLCJwb3J0IiwiREVGQVVMVF9QT1JUIiwicGF0aCIsInNlbXZlclNvcnQiLCJsaXN0VmVyc2lvbnMiLCJ4IiwibG9nZ2VyIiwid2FybiIsInZlciIsInNvcnQiLCJjb21wYXJlTG9vc2UiLCJtYXAiLCJub3JtYWxpemVEaXN0VGFncyIsInNvcnRlZCIsImxhdGVzdCIsInBvcCIsImlzQXJyYXkiLCJpc1N0cmluZyIsInBhcnNlSW50ZXJ2YWxUYWJsZSIsIm1zIiwicyIsIm0iLCJoIiwiZCIsInciLCJNIiwieSIsInBhcnNlSW50ZXJ2YWwiLCJpbnRlcnZhbCIsInJlc3VsdCIsImxhc3Rfc3VmZml4IiwiSW5maW5pdHkiLCJzcGxpdCIsIm1hdGNoIiwiRXJyb3IiLCJFcnJvckNvZGUiLCJmb2xkZXJFeGlzdHMiLCJzdGF0IiwiZnMiLCJzdGF0U3luYyIsImlzRGlyZWN0b3J5IiwiZmlsZUV4aXN0cyIsImlzRmlsZSIsInNvcnRCeU5hbWUiLCJwYWNrYWdlcyIsIm9yZGVyQXNjZW5kaW5nIiwic2xpY2UiLCJhIiwiYiIsImNvbXBhcmF0b3JOYW1lcyIsIm5hbWUiLCJ0b0xvd2VyQ2FzZSIsImFkZFNjb3BlIiwic2NvcGUiLCJwYWNrYWdlTmFtZSIsImRlbGV0ZVByb3BlcnRpZXMiLCJwcm9wZXJ0aWVzVG9EZWxldGUiLCJvYmplY3RJdGVtIiwicHJvcGVydHkiLCJhZGRHcmF2YXRhclN1cHBvcnQiLCJwa2dJbmZvIiwib25saW5lIiwicGtnSW5mb0NvcHkiLCJhdXRob3IiLCJnZXQiLCJjb250cmlidXRvcnMiLCJub3JtYWxpemVDb250cmlidXRvcnMiLCJtYWludGFpbmVycyIsImVtYWlsIiwiYXZhdGFyIiwiZ2VuZXJhdGVHcmF2YXRhclVybCIsIkdFTkVSSUNfQVZBVEFSIiwiaXNFbXB0eSIsImNvbnRyaWJ1dG9yIiwibWFpbnRhaW5lciIsInBhcnNlUmVhZG1lIiwicmVhZG1lIiwiaW5mbyIsImZvcm1hdEF1dGhvciIsImF1dGhvckRldGFpbHMiLCJERUZBVUxUX1VTRVIiLCJ1cmwiLCJwYWQiLCJzdHIiLCJtYXgiLCJyZXBlYXQiLCJtYXNrIiwiY2hhck51bSIsInN1YnN0ciIsImVuY29kZVNjb3BlZFVyaSIsInJlcGxhY2UiLCJoYXNEaWZmT25lS2V5IiwiaXNWZXJzaW9uVmFsaWQiLCJwYWNrYWdlTWV0YSIsInBhY2thZ2VWZXJzaW9uIiwiaGFzVmVyc2lvbiIsImhhc01hdGNoVmVyc2lvbiIsImluY2x1ZGVzIiwiaXNSZWxhdGVkVG9EZXByZWNhdGlvbiIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwidmFsaWRhdGVVUkwiLCJwdWJsaWNVcmwiLCJwYXJzZWQiLCJVUkwiLCJwcm90b2NvbCIsImlzSG9zdCIsIm9wdGlvbnMiLCJ2YWxpZGF0b3IiLCJpc1VSTCIsInJlcXVpcmVfaG9zdCIsImFsbG93X3RyYWlsaW5nX2RvdCIsInJlcXVpcmVfdmFsaWRfcHJvdG9jb2wiLCJyZXF1aXJlX3BvcnQiLCJyZXF1aXJlX3RsZCIsImhhc0xvZ2luIiwiY29uZmlnIiwiX2NvbmZpZyR3ZWIiLCJfY29uZmlnJHdlYjIiLCJ3ZWIiLCJsb2dpbiIsImlzTm9kZVZlcnNpb25IaWdoZXJUaGFuVjIyIiwibWFqb3IiLCJtaW5vciIsInByb2Nlc3MiLCJub2RlIl0sInNvdXJjZXMiOlsiLi4vLi4vc3JjL2xpYi91dGlscy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBzZW12ZXIgZnJvbSAnc2VtdmVyJztcbmltcG9ydCB7IFVSTCB9IGZyb20gJ3VybCc7XG5pbXBvcnQgdmFsaWRhdG9yIGZyb20gJ3ZhbGlkYXRvcic7XG5cbmltcG9ydCB7IHBhcnNlQ29uZmlnRmlsZSB9IGZyb20gJ0B2ZXJkYWNjaW8vY29uZmlnJztcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBtYXgtbGVuXG5pbXBvcnQgeyBlcnJvclV0aWxzLCB2YWxpZGF0aW9VdGlscyB9IGZyb20gJ0B2ZXJkYWNjaW8vY29yZSc7XG5pbXBvcnQgeyBTdHJpbmdWYWx1ZSB9IGZyb20gJ0B2ZXJkYWNjaW8vdHlwZXMnO1xuaW1wb3J0IHsgQXV0aG9yLCBDb25maWcsIFBhY2thZ2UsIFZlcnNpb24gfSBmcm9tICdAdmVyZGFjY2lvL3R5cGVzJztcbmltcG9ydCB7XG4gIEdFTkVSSUNfQVZBVEFSLFxuICBidWlsZFRva2VuIGFzIGJ1aWxkVG9rZW5VdGlsLFxuICBnZW5lcmF0ZUdyYXZhdGFyVXJsLFxuICBub3JtYWxpemVDb250cmlidXRvcnMsXG59IGZyb20gJ0B2ZXJkYWNjaW8vdXRpbHMnO1xuXG5pbXBvcnQgeyBBdXRob3JBdmF0YXIgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQge1xuICBERUZBVUxUX0RPTUFJTixcbiAgREVGQVVMVF9QT1JULFxuICBERUZBVUxUX1BST1RPQ09MLFxuICBERUZBVUxUX1VTRVIsXG4gIERJU1RfVEFHUyxcbn0gZnJvbSAnLi9jb25zdGFudHMnO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInO1xuXG5jb25zdCB7XG4gIGdldEJhZERhdGEsXG4gIGdldEJhZFJlcXVlc3QsXG4gIGdldENvZGUsXG4gIGdldENvbmZsaWN0LFxuICBnZXRGb3JiaWRkZW4sXG4gIGdldEludGVybmFsRXJyb3IsXG4gIGdldE5vdEZvdW5kLFxuICBnZXRTZXJ2aWNlVW5hdmFpbGFibGUsXG4gIGdldFVuYXV0aG9yaXplZCxcbn0gPSBlcnJvclV0aWxzO1xuY29uc3QgdmFsaWRQcm90b2NvbHMgPSBbJ2h0dHBzJywgJ2h0dHAnXTtcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0UGF5bG9hZFRvQmFzZTY0KHBheWxvYWQ6IHN0cmluZyk6IEJ1ZmZlciB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShwYXlsb2FkLCAnYmFzZTY0Jyk7XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciBhbiBlbGVtZW50IGlzIGFuIE9iamVjdFxuICogQHBhcmFtIHsqfSBvYmogdGhlIGVsZW1lbnRcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydCBjb25zdCBpc09iamVjdCA9IHZhbGlkYXRpb1V0aWxzLmlzT2JqZWN0O1xuXG4vKipcbiAqIEBkZXByZWNhdGVkIG5vdCB1c2VkIHVuIHY2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc09iamVjdE9yQXJyYXkob2JqOiBhbnkpOiBib29sZWFuIHtcbiAgcmV0dXJuIF8uaXNPYmplY3Qob2JqKSAmJiBfLmlzTnVsbChvYmopID09PSBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHRhZ1ZlcnNpb24oZGF0YTogUGFja2FnZSwgdmVyc2lvbjogc3RyaW5nLCB0YWc6IFN0cmluZ1ZhbHVlKTogYm9vbGVhbiB7XG4gIGlmICh0YWcgJiYgZGF0YVtESVNUX1RBR1NdW3RhZ10gIT09IHZlcnNpb24gJiYgc2VtdmVyLnBhcnNlKHZlcnNpb24sIHRydWUpKSB7XG4gICAgLy8gdmFsaWQgdmVyc2lvbiAtIHN0b3JlXG4gICAgZGF0YVtESVNUX1RBR1NdW3RhZ10gPSB2ZXJzaW9uO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBHZXRzIHZlcnNpb24gZnJvbSBhIHBhY2thZ2Ugb2JqZWN0IHRha2luZyBpbnRvIGFjY291bnQgc2VtdmVyIHdlaXJkbmVzcy5cbiAqIEByZXR1cm4ge1N0cmluZ30gcmV0dXJuIHRoZSBzZW1hbnRpYyB2ZXJzaW9uIG9mIGEgcGFja2FnZVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0VmVyc2lvbihwa2c6IFBhY2thZ2UsIHZlcnNpb246IGFueSk6IFZlcnNpb24gfCB2b2lkIHtcbiAgLy8gdGhpcyBjb25kaXRpb24gbXVzdCBhbGxvdyBjYXN0XG4gIGlmIChfLmlzTmlsKHBrZy52ZXJzaW9uc1t2ZXJzaW9uXSkgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIHBrZy52ZXJzaW9uc1t2ZXJzaW9uXTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgdmVyc2lvbiA9IHNlbXZlci5wYXJzZSh2ZXJzaW9uLCB0cnVlKTtcbiAgICBmb3IgKGNvbnN0IHZlcnNpb25JdGVtIGluIHBrZy52ZXJzaW9ucykge1xuICAgICAgaWYgKHZlcnNpb24uY29tcGFyZShzZW12ZXIucGFyc2UodmVyc2lvbkl0ZW0sIHRydWUpKSA9PT0gMCkge1xuICAgICAgICByZXR1cm4gcGtnLnZlcnNpb25zW3ZlcnNpb25JdGVtXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGFuIGludGVybmV0IGFkZHJlc3NcbiAqIEFsbG93OlxuIC0gaHR0cHM6bG9jYWxob3N0OjEyMzQgICAgICAgIC0gcHJvdG9jb2wgKyBob3N0ICsgcG9ydFxuIC0gbG9jYWxob3N0OjEyMzQgICAgICAgICAgICAgIC0gaG9zdCArIHBvcnRcbiAtIDEyMzQgICAgICAgICAgICAgICAgICAgICAgICAtIHBvcnRcbiAtIGh0dHA6OjEyMzQgICAgICAgICAgICAgICAgICAtIHByb3RvY29sICsgcG9ydFxuIC0gaHR0cHM6Ly9sb2NhbGhvc3Q6NDQzLyAgICAgIC0gZnVsbCB1cmwgKyBodHRwc1xuIC0gaHR0cDovL1s6OjFdOjQ0My8gICAgICAgICAgIC0gaXB2NlxuIC0gdW5peDovdG1wL2h0dHAuc29jayAgICAgICAgIC0gdW5peCBzb2NrZXRzXG4gLSBodHRwczovL3VuaXg6L3RtcC9odHRwLnNvY2sgLSB1bml4IHNvY2tldHMgKGh0dHBzKVxuICogQHBhcmFtIHsqfSB1cmxBZGRyZXNzIHRoZSBpbnRlcm5ldCBhZGRyZXNzIGRlZmluaXRpb25cbiAqIEByZXR1cm4ge09iamVjdHxOdWxsfSBsaXRlcmFsIG9iamVjdCB0aGF0IHJlcHJlc2VudCB0aGUgYWRkcmVzcyBwYXJzZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlQWRkcmVzcyh1cmxBZGRyZXNzOiBhbnkpOiBhbnkge1xuICAvL1xuICAvLyBUT0RPOiByZWZhY3RvciBpdCB0byBzb21ldGhpbmcgbW9yZSByZWFzb25hYmxlP1xuICAvL1xuICAvLyAgICAgICAgcHJvdG9jb2wgOiAgLy8gICAgICAoICBob3N0ICApfCggICAgaXB2NiAgICAgKTogIHBvcnQgIC9cbiAgbGV0IHVybFBhdHRlcm4gPSAvXigoaHR0cHM/KTooXFwvXFwvKT8pPygoKFteXFwvOl0qKXxcXFsoW15cXFtcXF1dKylcXF0pOik/KFxcZCspXFwvPyQvLmV4ZWModXJsQWRkcmVzcyk7XG5cbiAgaWYgKHVybFBhdHRlcm4pIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvdG86IHVybFBhdHRlcm5bMl0gfHwgREVGQVVMVF9QUk9UT0NPTCxcbiAgICAgIGhvc3Q6IHVybFBhdHRlcm5bNl0gfHwgdXJsUGF0dGVybls3XSB8fCBERUZBVUxUX0RPTUFJTixcbiAgICAgIHBvcnQ6IHVybFBhdHRlcm5bOF0gfHwgREVGQVVMVF9QT1JULFxuICAgIH07XG4gIH1cblxuICB1cmxQYXR0ZXJuID0gL14oKGh0dHBzPyk6KFxcL1xcLyk/KT91bml4OiguKikkLy5leGVjKHVybEFkZHJlc3MpO1xuXG4gIGlmICh1cmxQYXR0ZXJuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3RvOiB1cmxQYXR0ZXJuWzJdIHx8IERFRkFVTFRfUFJPVE9DT0wsXG4gICAgICBwYXRoOiB1cmxQYXR0ZXJuWzRdLFxuICAgIH07XG4gIH1cblxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiBmaWx0ZXJzIG91dCBiYWQgc2VtdmVyIHZlcnNpb25zIGFuZCBzb3J0cyB0aGUgYXJyYXkuXG4gKiBAcmV0dXJuIHtBcnJheX0gc29ydGVkIEFycmF5XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZW12ZXJTb3J0KGxpc3RWZXJzaW9uczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIHJldHVybiAoXG4gICAgbGlzdFZlcnNpb25zXG4gICAgICAuZmlsdGVyKGZ1bmN0aW9uICh4KTogYm9vbGVhbiB7XG4gICAgICAgIGlmICghc2VtdmVyLnBhcnNlKHgsIHRydWUpKSB7XG4gICAgICAgICAgbG9nZ2VyLndhcm4oeyB2ZXI6IHggfSwgJ2lnbm9yaW5nIGJhZCB2ZXJzaW9uIEB7dmVyfScpO1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAvLyBGSVhNRTogaXQgc2VlbXMgdGhlIEB0eXBlcy9zZW12ZXIgZG8gbm90IGhhbmRsZSBhIGxlZ2l0aW1hdGUgbWV0aG9kIG5hbWVkICdjb21wYXJlTG9vc2UnXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAuc29ydChzZW12ZXIuY29tcGFyZUxvb3NlKVxuICAgICAgLm1hcChTdHJpbmcpXG4gICk7XG59XG5cbi8qKlxuICogRmxhdHRlbiBhcnJheXMgb2YgdGFncy5cbiAqIEBwYXJhbSB7Kn0gZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplRGlzdFRhZ3MocGtnOiBQYWNrYWdlKTogdm9pZCB7XG4gIGxldCBzb3J0ZWQ7XG4gIGlmICghcGtnW0RJU1RfVEFHU10ubGF0ZXN0KSB7XG4gICAgLy8gb3ZlcndyaXRlIGxhdGVzdCB3aXRoIGhpZ2hlc3Qga25vd24gdmVyc2lvbiBiYXNlZCBvbiBzZW12ZXIgc29ydFxuICAgIHNvcnRlZCA9IHNlbXZlclNvcnQoT2JqZWN0LmtleXMocGtnLnZlcnNpb25zKSk7XG4gICAgaWYgKHNvcnRlZCAmJiBzb3J0ZWQubGVuZ3RoKSB7XG4gICAgICBwa2dbRElTVF9UQUdTXS5sYXRlc3QgPSBzb3J0ZWQucG9wKCk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCB0YWcgaW4gcGtnW0RJU1RfVEFHU10pIHtcbiAgICBpZiAoXy5pc0FycmF5KHBrZ1tESVNUX1RBR1NdW3RhZ10pKSB7XG4gICAgICBpZiAocGtnW0RJU1RfVEFHU11bdGFnXS5sZW5ndGgpIHtcbiAgICAgICAgLy8gc29ydCBhcnJheVxuICAgICAgICAvLyBGSVhNRTogdGhpcyBpcyBjbGVhcmx5IHdyb25nLCB3ZSBuZWVkIHRvIHJlc2VhcmNoIHdoeSB0aGlzIGlzIGxpa2UgdGhpcy5cbiAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICBzb3J0ZWQgPSBzZW12ZXJTb3J0KHBrZ1tESVNUX1RBR1NdW3RhZ10pO1xuICAgICAgICBpZiAoc29ydGVkLmxlbmd0aCkge1xuICAgICAgICAgIC8vIHVzZSBoaWdoZXN0IHZlcnNpb24gYmFzZWQgb24gc2VtdmVyIHNvcnRcbiAgICAgICAgICBwa2dbRElTVF9UQUdTXVt0YWddID0gc29ydGVkLnBvcCgpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWxldGUgcGtnW0RJU1RfVEFHU11bdGFnXTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcocGtnW0RJU1RfVEFHU11bdGFnXSkpIHtcbiAgICAgIGlmICghc2VtdmVyLnBhcnNlKHBrZ1tESVNUX1RBR1NdW3RhZ10sIHRydWUpKSB7XG4gICAgICAgIC8vIGlmIHRoZSB2ZXJzaW9uIGlzIGludmFsaWQsIGRlbGV0ZSB0aGUgZGlzdC10YWcgZW50cnlcbiAgICAgICAgZGVsZXRlIHBrZ1tESVNUX1RBR1NdW3RhZ107XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IHBhcnNlSW50ZXJ2YWxUYWJsZSA9IHtcbiAgJyc6IDEwMDAsXG4gIG1zOiAxLFxuICBzOiAxMDAwLFxuICBtOiA2MCAqIDEwMDAsXG4gIGg6IDYwICogNjAgKiAxMDAwLFxuICBkOiA4NjQwMDAwMCxcbiAgdzogNyAqIDg2NDAwMDAwLFxuICBNOiAzMCAqIDg2NDAwMDAwLFxuICB5OiAzNjUgKiA4NjQwMDAwMCxcbn07XG5cbi8qKlxuICogUGFyc2UgYW4gaW50ZXJuYWwgc3RyaW5nIHRvIG51bWJlclxuICogQHBhcmFtIHsqfSBpbnRlcnZhbFxuICogQHJldHVybiB7TnVtYmVyfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VJbnRlcnZhbChpbnRlcnZhbDogYW55KTogbnVtYmVyIHtcbiAgaWYgKHR5cGVvZiBpbnRlcnZhbCA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gaW50ZXJ2YWwgKiAxMDAwO1xuICB9XG4gIGxldCByZXN1bHQgPSAwO1xuICBsZXQgbGFzdF9zdWZmaXggPSBJbmZpbml0eTtcbiAgaW50ZXJ2YWwuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uICh4KTogdm9pZCB7XG4gICAgaWYgKCF4KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG0gPSB4Lm1hdGNoKC9eKCgwfFsxLTldWzAtOV0qKShcXC5bMC05XSspPykobXN8c3xtfGh8ZHx3fE18eXwpJC8pO1xuICAgIGlmIChcbiAgICAgICFtIHx8XG4gICAgICBwYXJzZUludGVydmFsVGFibGVbbVs0XV0gPj0gbGFzdF9zdWZmaXggfHxcbiAgICAgIChtWzRdID09PSAnJyAmJiBsYXN0X3N1ZmZpeCAhPT0gSW5maW5pdHkpXG4gICAgKSB7XG4gICAgICB0aHJvdyBFcnJvcignaW52YWxpZCBpbnRlcnZhbDogJyArIGludGVydmFsKTtcbiAgICB9XG4gICAgbGFzdF9zdWZmaXggPSBwYXJzZUludGVydmFsVGFibGVbbVs0XV07XG4gICAgcmVzdWx0ICs9IE51bWJlcihtWzFdKSAqIHBhcnNlSW50ZXJ2YWxUYWJsZVttWzRdXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBjb25zdCBFcnJvckNvZGUgPSB7XG4gIGdldENvbmZsaWN0LFxuICBnZXRCYWREYXRhLFxuICBnZXRCYWRSZXF1ZXN0LFxuICBnZXRJbnRlcm5hbEVycm9yLFxuICBnZXRVbmF1dGhvcml6ZWQsXG4gIGdldEZvcmJpZGRlbixcbiAgZ2V0U2VydmljZVVuYXZhaWxhYmxlLFxuICBnZXROb3RGb3VuZCxcbiAgZ2V0Q29kZSxcbn07XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgcGF0aCBhbHJlYWR5IGV4aXN0LlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBmb2xkZXJFeGlzdHMocGF0aDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgc3RhdCA9IGZzLnN0YXRTeW5jKHBhdGgpO1xuICAgIHJldHVybiBzdGF0LmlzRGlyZWN0b3J5KCk7XG4gIH0gY2F0Y2ggKF86IGFueSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIHdoZXRoZXIgdGhlIGZpbGUgYWxyZWFkeSBleGlzdC5cbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZmlsZUV4aXN0cyhwYXRoOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMocGF0aCk7XG4gICAgcmV0dXJuIHN0YXQuaXNGaWxlKCk7XG4gIH0gY2F0Y2ggKF86IGFueSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc29ydEJ5TmFtZShwYWNrYWdlczogYW55W10sIG9yZGVyQXNjZW5kaW5nOiBib29sZWFuIHwgdm9pZCA9IHRydWUpOiBzdHJpbmdbXSB7XG4gIHJldHVybiBwYWNrYWdlcy5zbGljZSgpLnNvcnQoZnVuY3Rpb24gKGEsIGIpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbXBhcmF0b3JOYW1lcyA9IGEubmFtZS50b0xvd2VyQ2FzZSgpIDwgYi5uYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICByZXR1cm4gb3JkZXJBc2NlbmRpbmcgPyAoY29tcGFyYXRvck5hbWVzID8gLTEgOiAxKSA6IGNvbXBhcmF0b3JOYW1lcyA/IDEgOiAtMTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRTY29wZShzY29wZTogc3RyaW5nLCBwYWNrYWdlTmFtZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGBAJHtzY29wZX0vJHtwYWNrYWdlTmFtZX1gO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlUHJvcGVydGllcyhwcm9wZXJ0aWVzVG9EZWxldGU6IHN0cmluZ1tdLCBvYmplY3RJdGVtOiBhbnkpOiBhbnkge1xuICBfLmZvckVhY2gocHJvcGVydGllc1RvRGVsZXRlLCAocHJvcGVydHkpOiBhbnkgPT4ge1xuICAgIGRlbGV0ZSBvYmplY3RJdGVtW3Byb3BlcnR5XTtcbiAgfSk7XG5cbiAgcmV0dXJuIG9iamVjdEl0ZW07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRHcmF2YXRhclN1cHBvcnQocGtnSW5mbzogUGFja2FnZSwgb25saW5lID0gdHJ1ZSk6IEF1dGhvckF2YXRhciB7XG4gIGNvbnN0IHBrZ0luZm9Db3B5ID0geyAuLi5wa2dJbmZvIH0gYXMgYW55O1xuICBjb25zdCBhdXRob3I6IGFueSA9IF8uZ2V0KHBrZ0luZm8sICdsYXRlc3QuYXV0aG9yJywgbnVsbCkgYXMgYW55O1xuICBjb25zdCBjb250cmlidXRvcnM6IEF1dGhvckF2YXRhcltdID0gbm9ybWFsaXplQ29udHJpYnV0b3JzKFxuICAgIF8uZ2V0KHBrZ0luZm8sICdsYXRlc3QuY29udHJpYnV0b3JzJywgW10pXG4gICk7XG4gIGNvbnN0IG1haW50YWluZXJzID0gXy5nZXQocGtnSW5mbywgJ2xhdGVzdC5tYWludGFpbmVycycsIFtdKTtcblxuICAvLyBmb3IgYXV0aG9yLlxuICBpZiAoYXV0aG9yICYmIF8uaXNPYmplY3QoYXV0aG9yKSkge1xuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF1dGhvciBhcyBBdXRob3I7XG4gICAgcGtnSW5mb0NvcHkubGF0ZXN0LmF1dGhvci5hdmF0YXIgPSBnZW5lcmF0ZUdyYXZhdGFyVXJsKGVtYWlsLCBvbmxpbmUpO1xuICB9XG5cbiAgaWYgKGF1dGhvciAmJiBfLmlzU3RyaW5nKGF1dGhvcikpIHtcbiAgICBwa2dJbmZvQ29weS5sYXRlc3QuYXV0aG9yID0ge1xuICAgICAgYXZhdGFyOiBHRU5FUklDX0FWQVRBUixcbiAgICAgIGVtYWlsOiAnJyxcbiAgICAgIGF1dGhvcixcbiAgICB9O1xuICB9XG5cbiAgLy8gZm9yIGNvbnRyaWJ1dG9yc1xuICBpZiAoXy5pc0VtcHR5KGNvbnRyaWJ1dG9ycykgPT09IGZhbHNlKSB7XG4gICAgcGtnSW5mb0NvcHkubGF0ZXN0LmNvbnRyaWJ1dG9ycyA9IGNvbnRyaWJ1dG9ycy5tYXAoKGNvbnRyaWJ1dG9yKTogQXV0aG9yQXZhdGFyID0+IHtcbiAgICAgIGlmIChpc09iamVjdChjb250cmlidXRvcikpIHtcbiAgICAgICAgY29udHJpYnV0b3IuYXZhdGFyID0gZ2VuZXJhdGVHcmF2YXRhclVybChjb250cmlidXRvci5lbWFpbCwgb25saW5lKTtcbiAgICAgIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhjb250cmlidXRvcikpIHtcbiAgICAgICAgY29udHJpYnV0b3IgPSB7XG4gICAgICAgICAgYXZhdGFyOiBHRU5FUklDX0FWQVRBUixcbiAgICAgICAgICBlbWFpbDogY29udHJpYnV0b3IsXG4gICAgICAgICAgbmFtZTogY29udHJpYnV0b3IsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjb250cmlidXRvcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIGZvciBtYWludGFpbmVyc1xuICBpZiAoXy5pc0VtcHR5KG1haW50YWluZXJzKSA9PT0gZmFsc2UpIHtcbiAgICBwa2dJbmZvQ29weS5sYXRlc3QubWFpbnRhaW5lcnMgPSBtYWludGFpbmVycy5tYXAoKG1haW50YWluZXI6IGFueSk6IHZvaWQgPT4ge1xuICAgICAgbWFpbnRhaW5lci5hdmF0YXIgPSBnZW5lcmF0ZUdyYXZhdGFyVXJsKG1haW50YWluZXIuZW1haWwsIG9ubGluZSk7XG4gICAgICByZXR1cm4gbWFpbnRhaW5lcjtcbiAgICB9KTtcbiAgfVxuXG4gIHJldHVybiBwa2dJbmZvQ29weTtcbn1cblxuLyoqXG4gKiBwYXJzZSBwYWNrYWdlIHJlYWRtZSAtIG1hcmtkb3duL2FzY2lpXG4gKiBAcGFyYW0ge1N0cmluZ30gcGFja2FnZU5hbWUgbmFtZSBvZiBwYWNrYWdlXG4gKiBAcGFyYW0ge1N0cmluZ30gcmVhZG1lIHBhY2thZ2UgcmVhZG1lXG5cbiAqIEByZXR1cm4ge1N0cmluZ30gY29udmVydGVkIGh0bWwgdGVtcGxhdGVcbiAqL1xuLy8gVE9ETzogcmVuYW1lLCBkb2VzIG5vdCBwYXJzZSBhbnltb3JlXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZWFkbWUocGFja2FnZU5hbWU6IHN0cmluZywgcmVhZG1lOiBzdHJpbmcpOiBzdHJpbmcgfCB2b2lkIHtcbiAgaWYgKF8uaXNFbXB0eShyZWFkbWUpID09PSBmYWxzZSkge1xuICAgIHJldHVybiByZWFkbWU7XG4gIH1cblxuICAvLyBsb2dzIHJlYWRtZSBub3QgZm91bmQgZXJyb3JcbiAgbG9nZ2VyLmluZm8oeyBwYWNrYWdlTmFtZSB9LCAnQHtwYWNrYWdlTmFtZX06IE5vIHJlYWRtZSBmb3VuZCcpO1xuXG4gIHJldHVybiAnRVJST1I6IE5vIFJFQURNRSBkYXRhIGZvdW5kISc7XG59XG5cbmV4cG9ydCB0eXBlIEF1dGhvckZvcm1hdCA9IEF1dGhvciB8IHN0cmluZyB8IG51bGwgfCBvYmplY3QgfCB2b2lkO1xuXG4vKipcbiAqIEZvcm1hdHMgYXV0aG9yIGZpZWxkIGZvciB3ZWJ1aS5cbiAqIEBzZWUgaHR0cHM6Ly9kb2NzLm5wbWpzLmNvbS9maWxlcy9wYWNrYWdlLmpzb24jYXV0aG9yXG4gKiBAcGFyYW0ge3N0cmluZ3xvYmplY3R8dW5kZWZpbmVkfSBhdXRob3JcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEF1dGhvcihhdXRob3I6IEF1dGhvckZvcm1hdCk6IGFueSB7XG4gIGxldCBhdXRob3JEZXRhaWxzID0ge1xuICAgIG5hbWU6IERFRkFVTFRfVVNFUixcbiAgICBlbWFpbDogJycsXG4gICAgdXJsOiAnJyxcbiAgfTtcblxuICBpZiAoXy5pc05pbChhdXRob3IpKSB7XG4gICAgcmV0dXJuIGF1dGhvckRldGFpbHM7XG4gIH1cblxuICBpZiAoXy5pc1N0cmluZyhhdXRob3IpKSB7XG4gICAgYXV0aG9yRGV0YWlscyA9IHtcbiAgICAgIC4uLmF1dGhvckRldGFpbHMsXG4gICAgICBuYW1lOiBhdXRob3IgYXMgc3RyaW5nLFxuICAgIH07XG4gIH1cblxuICBpZiAoXy5pc09iamVjdChhdXRob3IpKSB7XG4gICAgYXV0aG9yRGV0YWlscyA9IHtcbiAgICAgIC4uLmF1dGhvckRldGFpbHMsXG4gICAgICAuLi4oYXV0aG9yIGFzIEF1dGhvciksXG4gICAgfTtcbiAgfVxuXG4gIHJldHVybiBhdXRob3JEZXRhaWxzO1xufVxuXG4vKipcbiAqIEFwcGx5IHdoaXRlc3BhY2VzIGJhc2VkIG9uIHRoZSBsZW5ndGhcbiAqIEBwYXJhbSB7Kn0gc3RyIHRoZSBsb2cgbWVzc2FnZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFkKHN0ciwgbWF4KTogc3RyaW5nIHtcbiAgaWYgKHN0ci5sZW5ndGggPCBtYXgpIHtcbiAgICByZXR1cm4gc3RyICsgJyAnLnJlcGVhdChtYXggLSBzdHIubGVuZ3RoKTtcbiAgfVxuICByZXR1cm4gc3RyO1xufVxuXG4vKipcbiAqIHJldHVybiBhIG1hc3F1ZXJhZGUgc3RyaW5nIHdpdGggaXRzIGZpcnN0IGFuZCBsYXN0IHtjaGFyTnVtfSBhbmQgdGhyZWUgZG90cyBpbiBiZXR3ZWVuLlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtOdW1iZXJ9IGNoYXJOdW1cbiAqIEByZXR1cm5zIHtTdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXNrKHN0cjogc3RyaW5nLCBjaGFyTnVtID0gMyk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtzdHIuc3Vic3RyKDAsIGNoYXJOdW0pfS4uLiR7c3RyLnN1YnN0cigtY2hhck51bSl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZVNjb3BlZFVyaShwYWNrYWdlTmFtZSk6IHN0cmluZyB7XG4gIHJldHVybiBwYWNrYWdlTmFtZS5yZXBsYWNlKC9cXC8vZywgJyUyZicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzRGlmZk9uZUtleSh2ZXJzaW9ucyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LmtleXModmVyc2lvbnMpLmxlbmd0aCAhPT0gMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzVmVyc2lvblZhbGlkKHBhY2thZ2VNZXRhLCBwYWNrYWdlVmVyc2lvbik6IGJvb2xlYW4ge1xuICBjb25zdCBoYXNWZXJzaW9uID0gdHlwZW9mIHBhY2thZ2VWZXJzaW9uICE9PSAndW5kZWZpbmVkJztcbiAgaWYgKCFoYXNWZXJzaW9uKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgaGFzTWF0Y2hWZXJzaW9uID0gT2JqZWN0LmtleXMocGFja2FnZU1ldGEudmVyc2lvbnMpLmluY2x1ZGVzKHBhY2thZ2VWZXJzaW9uKTtcbiAgcmV0dXJuIGhhc01hdGNoVmVyc2lvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUmVsYXRlZFRvRGVwcmVjYXRpb24ocGtnSW5mbzogUGFja2FnZSk6IGJvb2xlYW4ge1xuICBjb25zdCB7IHZlcnNpb25zIH0gPSBwa2dJbmZvO1xuICBmb3IgKGNvbnN0IHZlcnNpb24gaW4gdmVyc2lvbnMpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZlcnNpb25zW3ZlcnNpb25dLCAnZGVwcmVjYXRlZCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVVUkwocHVibGljVXJsOiBzdHJpbmcgfCB2b2lkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgcGFyc2VkID0gbmV3IFVSTChwdWJsaWNVcmwgYXMgc3RyaW5nKTtcbiAgICBpZiAoIXZhbGlkUHJvdG9jb2xzLmluY2x1ZGVzKHBhcnNlZC5wcm90b2NvbC5yZXBsYWNlKCc6JywgJycpKSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ2ludmFsaWQgcHJvdG9jb2wnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycjogYW55KSB7XG4gICAgLy8gVE9ETzogYWRkIGVycm9yIGxvZ2dlciBoZXJlXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0hvc3QodXJsOiBzdHJpbmcgPSAnJywgb3B0aW9ucyA9IHt9KTogYm9vbGVhbiB7XG4gIHJldHVybiB2YWxpZGF0b3IuaXNVUkwodXJsLCB7XG4gICAgcmVxdWlyZV9ob3N0OiB0cnVlLFxuICAgIGFsbG93X3RyYWlsaW5nX2RvdDogZmFsc2UsXG4gICAgcmVxdWlyZV92YWxpZF9wcm90b2NvbDogZmFsc2UsXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHJlcXVpcmVfcG9ydDogZmFsc2UsXG4gICAgcmVxdWlyZV90bGQ6IGZhbHNlLFxuICAgIC4uLm9wdGlvbnMsXG4gIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzTG9naW4oY29uZmlnOiBDb25maWcpIHtcbiAgLy8gRklYTUU6IHR5cGVzIGFyZSBub3QgeWV0IG9uIHRoZSBsaWJyYXJ5IHZlcmRhY2Npby9tb25vcmVwb1xuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBfLmlzTmlsKGNvbmZpZz8ud2ViPy5sb2dpbikgfHwgY29uZmlnPy53ZWI/LmxvZ2luID09PSB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNOb2RlVmVyc2lvbkhpZ2hlclRoYW5WMjIoKSB7XG4gIGNvbnN0IFttYWpvciwgbWlub3JdID0gcHJvY2Vzcy52ZXJzaW9ucy5ub2RlLnNwbGl0KCcuJykubWFwKE51bWJlcik7XG4gIHJldHVybiBtYWpvciA+IDIyIHx8IChtYWpvciA9PT0gMjIgJiYgbWlub3IgPiAwKTtcbn1cblxuZXhwb3J0IHsgYnVpbGRUb2tlblV0aWwgYXMgYnVpbGRUb2tlbiwgcGFyc2VDb25maWdGaWxlIH07XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUFBLEdBQUEsR0FBQUMsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUYsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFHLElBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFVBQUEsR0FBQUwsc0JBQUEsQ0FBQUMsT0FBQTtBQUVBLElBQUFLLE9BQUEsR0FBQUwsT0FBQTtBQUVBLElBQUFNLEtBQUEsR0FBQU4sT0FBQTtBQUdBLElBQUFPLE1BQUEsR0FBQVAsT0FBQTtBQVFBLElBQUFRLFVBQUEsR0FBQVIsT0FBQTtBQU9BLElBQUFTLE9BQUEsR0FBQVQsT0FBQTtBQUFrQyxTQUFBRCx1QkFBQVcsQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFBLFNBQUFHLFFBQUFILENBQUEsRUFBQUksQ0FBQSxRQUFBQyxDQUFBLEdBQUFDLE1BQUEsQ0FBQUMsSUFBQSxDQUFBUCxDQUFBLE9BQUFNLE1BQUEsQ0FBQUUscUJBQUEsUUFBQUMsQ0FBQSxHQUFBSCxNQUFBLENBQUFFLHFCQUFBLENBQUFSLENBQUEsR0FBQUksQ0FBQSxLQUFBSyxDQUFBLEdBQUFBLENBQUEsQ0FBQUMsTUFBQSxXQUFBTixDQUFBLFdBQUFFLE1BQUEsQ0FBQUssd0JBQUEsQ0FBQVgsQ0FBQSxFQUFBSSxDQUFBLEVBQUFRLFVBQUEsT0FBQVAs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